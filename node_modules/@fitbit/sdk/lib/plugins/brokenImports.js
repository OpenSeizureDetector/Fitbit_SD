"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const fs_1 = tslib_1.__importDefault(require("fs"));
const path_1 = tslib_1.__importDefault(require("path"));
function brokenImports() {
    return {
        name: 'broken-imports',
        resolveId(importee, importer) {
            if (!importer)
                return;
            if (importer.startsWith('\0'))
                return;
            if (/^\.{0,2}\//.test(importee))
                return;
            const relativeImportee = path_1.default.join(path_1.default.dirname(importer), importee);
            const importeeJS = importee.endsWith('.js')
                ? relativeImportee
                : `${relativeImportee}.js`;
            if (fs_1.default.existsSync(importeeJS)) {
                this.warn(`Import in ${path_1.default.relative(process.cwd(), importer)} has non-relative path but should be relative: replace '${importee}' with './${importee}'.`);
                return importeeJS;
            }
        },
    };
}
exports.default = brokenImports;
